<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ·æ¥­å®¶ãƒ¡ãƒ³ã‚¿ãƒ«ã‚±ã‚¢ | å¿ƒã®ã‚»ãƒ«ãƒ•ã‚±ã‚¢ãƒ„ãƒ¼ãƒ«</title>
    <script>
        // =============================================
        // ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼è¨­å®šï¼ˆã“ã“ã‚’ç·¨é›†ã—ã¦ç®¡ç†ï¼‰
        // =============================================
        const validKeys = {
            "demo": { expires: "2099-12-31", name: "ãƒ‡ãƒ¢ç”¨ï¼ˆç„¡æœŸé™ï¼‰" },
            "1215session": { expires: "2024-12-22", name: "12/15èª¬æ˜ä¼š" },
            "1220session": { expires: "2024-12-27", name: "12/20èª¬æ˜ä¼š" },
        };
        // =============================================

        function checkAccess() {
            const urlParams = new URLSearchParams(window.location.search);
            const key = urlParams.get('key');
            if (!key || !validKeys[key]) {
                return { valid: false, reason: 'invalid_key' };
            }
            const keyData = validKeys[key];
            const today = new Date();
            const expireDate = new Date(keyData.expires + 'T23:59:59');
            if (today > expireDate) {
                return { valid: false, reason: 'expired', expireDate: keyData.expires };
            }
            return { valid: true, keyData };
        }
        const accessResult = checkAccess();
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 680px;
            margin: 0 auto;
            padding: 20px;
        }

        .card {
            background: white;
            border-radius: 24px;
            padding: 35px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            margin-top: 20px;
        }

        /* ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ç”»é¢ */
        .access-denied {
            display: none;
            text-align: center;
            padding: 60px 20px;
        }

        .access-denied.show {
            display: block;
        }

        .access-denied .icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .access-denied h2 {
            color: #e94560;
            margin-bottom: 15px;
        }

        .access-denied p {
            color: #666;
            line-height: 1.8;
        }

        .main-content {
            display: none;
        }

        .main-content.show {
            display: block;
        }

        .logo {
            text-align: center;
            margin-bottom: 10px;
        }

        .logo-text {
            font-size: 0.85rem;
            color: #4ECDC4;
            font-weight: bold;
            letter-spacing: 2px;
        }

        h1 {
            text-align: center;
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.8rem;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 0.95rem;
            line-height: 1.8;
        }

        /* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .tab-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 15px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 15px;
            border: none;
            background: #f0f0f0;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            color: #666;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            color: white;
        }

        .tab-btn:hover:not(.active) {
            background: #e0e0e0;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* æ°—åˆ†ãƒã‚§ãƒƒã‚¯ */
        .mood-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .mood-item {
            padding: 20px 10px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .mood-item:hover {
            border-color: #4ECDC4;
            background: #f0fffd;
        }

        .mood-item.selected {
            border-color: #4ECDC4;
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            color: white;
        }

        .mood-item .emoji {
            font-size: 2.5rem;
            margin-bottom: 8px;
        }

        .mood-item .label {
            font-size: 0.85rem;
            font-weight: bold;
        }

        /* ä¸å®‰å…¥åŠ› */
        .worry-input {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            margin-bottom: 15px;
        }

        .worry-input:focus {
            outline: none;
            border-color: #4ECDC4;
        }

        .btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(78, 205, 196, 0.4);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-secondary {
            background: white;
            color: #4ECDC4;
            border: 2px solid #4ECDC4;
        }

        .btn-secondary:hover {
            background: #f0fffd;
            box-shadow: none;
            transform: none;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¨ãƒªã‚¢ */
        .response-area {
            background: linear-gradient(135deg, #f0fffd 0%, #e8f8f5 100%);
            border-radius: 16px;
            padding: 25px;
            margin-top: 20px;
            display: none;
        }

        .response-area.show {
            display: block;
            animation: fadeIn 0.5s;
        }

        .response-area h3 {
            color: #44A08D;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .response-area p {
            line-height: 1.9;
            color: #444;
            margin-bottom: 15px;
        }

        .response-area ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .response-area li {
            margin-bottom: 10px;
            line-height: 1.7;
        }

        /* èªçŸ¥ã®æ­ªã¿ */
        .distortion-box {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #FF6B6B;
        }

        .distortion-box h4 {
            color: #FF6B6B;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .distortion-box p {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0;
        }

        .reframe-box {
            background: white;
            border-radius: 12px;
            padding: 15px;
            border-left: 4px solid #4ECDC4;
        }

        .reframe-box h4 {
            color: #44A08D;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .reframe-box p {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0;
        }

        /* ãƒ‡ã‚¤ãƒªãƒ¼ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ */
        .checkin-item {
            background: #f8f9ff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .checkin-item h4 {
            color: #333;
            margin-bottom: 12px;
            font-size: 1rem;
        }

        .slider-container {
            margin-bottom: 10px;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            cursor: pointer;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: #999;
        }

        .slider-value {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #44A08D;
            margin-top: 5px;
        }

        /* å±¥æ­´ */
        .history-item {
            background: #f8f9ff;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .history-item .date {
            font-size: 0.8rem;
            color: #999;
            margin-bottom: 5px;
        }

        .history-item .mood {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .history-item .note {
            font-size: 0.9rem;
            color: #666;
        }

        /* ã‚¬ã‚¤ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .guide-section {
            background: #fff5f5;
            border-radius: 16px;
            padding: 25px;
            margin-top: 20px;
        }

        .guide-section h3 {
            color: #FF6B6B;
            margin-bottom: 15px;
        }

        .warning-signs {
            list-style: none;
            padding: 0;
        }

        .warning-signs li {
            padding: 12px 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .warning-signs li .icon {
            font-size: 1.2rem;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        @media (max-width: 500px) {
            .card {
                padding: 25px 20px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .mood-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .tab-btn {
                padding: 10px 8px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <!-- ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ç”»é¢ -->
            <div class="access-denied" id="access-denied">
                <div class="icon">ğŸ”’</div>
                <h2 id="denied-title">ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“</h2>
                <p id="denied-message">ã“ã®ãƒšãƒ¼ã‚¸ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒãªã„ã‹ã€æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã¾ã™ã€‚</p>
                <p style="font-size: 0.85rem; color: #999; margin-top: 15px;">èª¬æ˜ä¼šå‚åŠ è€…ã®æ–¹ã¯ã€é…å¸ƒã•ã‚ŒãŸURLã‚’ã”ç¢ºèªãã ã•ã„ã€‚</p>
            </div>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <div class="main-content" id="main-content">
                <div class="logo">
                    <span class="logo-text">ENTREPRENEUR MENTAL CARE</span>
                </div>
                <h1>èµ·æ¥­å®¶ãƒ¡ãƒ³ã‚¿ãƒ«ã‚±ã‚¢</h1>
                <p class="subtitle">èµ·æ¥­ã®ä¸å®‰ã‚„ã‚¹ãƒˆãƒ¬ã‚¹ã‚’<br>ã‚»ãƒ«ãƒ•ã‚±ã‚¢ã§ã‚µãƒãƒ¼ãƒˆã—ã¾ã™</p>

                <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
                <div class="tab-nav">
                    <button class="tab-btn active" onclick="showTab('mood')">ğŸ˜Š æ°—åˆ†</button>
                    <button class="tab-btn" onclick="showTab('worry')">ğŸ’­ ä¸å®‰</button>
                    <button class="tab-btn" onclick="showTab('checkin')">ğŸ“ è¨˜éŒ²</button>
                    <button class="tab-btn" onclick="showTab('guide')">ğŸ“– ã‚¬ã‚¤ãƒ‰</button>
                </div>

                <!-- ã‚¿ãƒ–1: æ°—åˆ†ãƒã‚§ãƒƒã‚¯ -->
                <div class="tab-content active" id="tab-mood">
                    <h3 style="margin-bottom: 20px; color: #333;">ä»Šã®æ°—åˆ†ã‚’æ•™ãˆã¦ãã ã•ã„</h3>

                    <div class="mood-grid">
                        <div class="mood-item" onclick="selectMood(this, 'great')">
                            <div class="emoji">ğŸ˜„</div>
                            <div class="label">ã¨ã¦ã‚‚è‰¯ã„</div>
                        </div>
                        <div class="mood-item" onclick="selectMood(this, 'good')">
                            <div class="emoji">ğŸ™‚</div>
                            <div class="label">è‰¯ã„</div>
                        </div>
                        <div class="mood-item" onclick="selectMood(this, 'normal')">
                            <div class="emoji">ğŸ˜</div>
                            <div class="label">æ™®é€š</div>
                        </div>
                        <div class="mood-item" onclick="selectMood(this, 'anxious')">
                            <div class="emoji">ğŸ˜°</div>
                            <div class="label">ä¸å®‰</div>
                        </div>
                        <div class="mood-item" onclick="selectMood(this, 'tired')">
                            <div class="emoji">ğŸ˜©</div>
                            <div class="label">ç–²ã‚ŒãŸ</div>
                        </div>
                        <div class="mood-item" onclick="selectMood(this, 'down')">
                            <div class="emoji">ğŸ˜¢</div>
                            <div class="label">è½ã¡è¾¼ã¿</div>
                        </div>
                    </div>

                    <div class="response-area" id="mood-response">
                        <!-- æ°—åˆ†ã«å¿œã˜ãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </div>
                </div>

                <!-- ã‚¿ãƒ–2: ä¸å®‰åˆ†æ -->
                <div class="tab-content" id="tab-worry">
                    <h3 style="margin-bottom: 15px; color: #333;">ä»Šã®ä¸å®‰ã‚„æ‚©ã¿ã‚’æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†</h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">
                        æ›¸ãå‡ºã™ã ã‘ã§æ°—æŒã¡ãŒæ•´ç†ã•ã‚Œã¾ã™ã€‚<br>
                        AIãŒèªçŸ¥ã®æ­ªã¿ã‚’åˆ†æã—ã€åˆ¥ã®è¦–ç‚¹ã‚’ææ¡ˆã—ã¾ã™ã€‚
                    </p>

                    <textarea class="worry-input" id="worry-input" placeholder="ä¾‹ï¼šèµ·æ¥­ã—ãŸã„ã‘ã©ã€å¤±æ•—ã—ãŸã‚‰ã©ã†ã—ã‚ˆã†ã€‚å®¶æ—ã«åå¯¾ã•ã‚ŒãŸã‚‰...å‘¨ã‚Šã®ç›®ãŒæ°—ã«ãªã‚‹..."></textarea>

                    <button class="btn" onclick="analyzeWorry()">ğŸ” åˆ†æã™ã‚‹</button>

                    <div class="response-area" id="worry-response">
                        <!-- åˆ†æçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                    </div>
                </div>

                <!-- ã‚¿ãƒ–3: ãƒ‡ã‚¤ãƒªãƒ¼ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ -->
                <div class="tab-content" id="tab-checkin">
                    <h3 style="margin-bottom: 20px; color: #333;">ä»Šæ—¥ã®ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã‚’è¨˜éŒ²</h3>

                    <div class="checkin-item">
                        <h4>ğŸ˜Š å…¨ä½“çš„ãªæ°—åˆ†</h4>
                        <div class="slider-container">
                            <input type="range" class="slider" id="mood-slider" min="1" max="10" value="5" oninput="updateSlider('mood')">
                            <div class="slider-labels">
                                <span>æœ€æ‚ª</span>
                                <span>æœ€é«˜</span>
                            </div>
                            <div class="slider-value" id="mood-value">5</div>
                        </div>
                    </div>

                    <div class="checkin-item">
                        <h4>âš¡ ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ¬ãƒ™ãƒ«</h4>
                        <div class="slider-container">
                            <input type="range" class="slider" id="energy-slider" min="1" max="10" value="5" oninput="updateSlider('energy')">
                            <div class="slider-labels">
                                <span>ç–²åŠ´å›°æ†Š</span>
                                <span>ã‚¨ãƒãƒ«ã‚®ãƒ¼æº€ã‚¿ãƒ³</span>
                            </div>
                            <div class="slider-value" id="energy-value">5</div>
                        </div>
                    </div>

                    <div class="checkin-item">
                        <h4>ğŸ˜° ä¸å®‰ãƒ¬ãƒ™ãƒ«</h4>
                        <div class="slider-container">
                            <input type="range" class="slider" id="anxiety-slider" min="1" max="10" value="5" oninput="updateSlider('anxiety')">
                            <div class="slider-labels">
                                <span>ç©ã‚„ã‹</span>
                                <span>éå¸¸ã«ä¸å®‰</span>
                            </div>
                            <div class="slider-value" id="anxiety-value">5</div>
                        </div>
                    </div>

                    <textarea class="worry-input" id="checkin-note" placeholder="ä»Šæ—¥ã®ä¸€è¨€ãƒ¡ãƒ¢ï¼ˆä»»æ„ï¼‰" style="min-height: 80px;"></textarea>

                    <button class="btn" onclick="saveCheckin()">ğŸ’¾ è¨˜éŒ²ã‚’ä¿å­˜</button>

                    <div style="margin-top: 25px;">
                        <h4 style="color: #333; margin-bottom: 15px;">ğŸ“… éå»ã®è¨˜éŒ²</h4>
                        <div id="history-list">
                            <!-- å±¥æ­´ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                            <p style="color: #999; text-align: center;">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>
                        </div>
                    </div>
                </div>

                <!-- ã‚¿ãƒ–4: ã‚¬ã‚¤ãƒ‰ -->
                <div class="tab-content" id="tab-guide">
                    <h3 style="margin-bottom: 20px; color: #333;">èµ·æ¥­å®¶ã®ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ã‚¬ã‚¤ãƒ‰</h3>

                    <div style="background: #f0fffd; border-radius: 16px; padding: 20px; margin-bottom: 20px;">
                        <h4 style="color: #44A08D; margin-bottom: 15px;">ğŸ“Š èµ·æ¥­å®¶ã®ãƒ¡ãƒ³ã‚¿ãƒ«çµ±è¨ˆ</h4>
                        <ul style="padding-left: 20px; color: #555; line-height: 1.8;">
                            <li>èµ·æ¥­å®¶ã®<strong>72%</strong>ãŒãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ã®å•é¡Œã‚’çµŒé¨“</li>
                            <li>ä¸€èˆ¬ã®äººã‚ˆã‚Š<strong>ã†ã¤ç—…ãƒªã‚¹ã‚¯ãŒ2å€</strong></li>
                            <li>ã—ã‹ã—<strong>81%</strong>ãŒèª°ã«ã‚‚ç›¸è«‡ã—ã¦ã„ãªã„</li>
                        </ul>
                        <p style="color: #44A08D; font-weight: bold; margin-top: 15px;">â†’ ã‚ãªãŸã ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
                    </div>

                    <div class="guide-section">
                        <h3>âš ï¸ è¦æ³¨æ„ã‚µã‚¤ãƒ³</h3>
                        <p style="color: #666; margin-bottom: 15px;">ä»¥ä¸‹ã®ç—‡çŠ¶ãŒ2é€±é–“ä»¥ä¸Šç¶šãå ´åˆã¯ã€å°‚é–€å®¶ã¸ã®ç›¸è«‡ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</p>
                        <ul class="warning-signs">
                            <li><span class="icon">ğŸ˜´</span> ç¡çœ éšœå®³ï¼ˆçœ ã‚Œãªã„/çœ ã‚Šã™ãã‚‹ï¼‰</li>
                            <li><span class="icon">ğŸ½ï¸</span> é£Ÿæ¬²ã®å¤§ããªå¤‰åŒ–</li>
                            <li><span class="icon">ğŸ˜”</span> ä½•ã‚’ã—ã¦ã‚‚æ¥½ã—ããªã„</li>
                            <li><span class="icon">ğŸ”„</span> åŒã˜ä¸å®‰ãŒé ­ã‹ã‚‰é›¢ã‚Œãªã„</li>
                            <li><span class="icon">ğŸ’¢</span> äº›ç´°ãªã“ã¨ã§æ€’ã‚ŠãŒçˆ†ç™ºã™ã‚‹</li>
                            <li><span class="icon">ğŸš«</span> ã€Œæ¶ˆãˆãŸã„ã€ã¨ã„ã†æ°—æŒã¡</li>
                        </ul>
                    </div>

                    <div style="background: #e8f5e9; border-radius: 16px; padding: 20px; margin-top: 20px;">
                        <h4 style="color: #2e7d32; margin-bottom: 15px;">ğŸ†˜ ç›¸è«‡å…ˆãƒªã‚¹ãƒˆ</h4>
                        <ul style="padding-left: 20px; color: #555; line-height: 2;">
                            <li><strong>ã‚ˆã‚Šãã„ãƒ›ãƒƒãƒˆãƒ©ã‚¤ãƒ³:</strong> 0120-279-338ï¼ˆ24æ™‚é–“ï¼‰</li>
                            <li><strong>ã„ã®ã¡ã®é›»è©±:</strong> 0570-783-556</li>
                            <li><strong>ã“ã“ã‚ã®å¥åº·ç›¸è«‡çµ±ä¸€ãƒ€ã‚¤ãƒ¤ãƒ«:</strong> 0570-064-556</li>
                        </ul>
                        <p style="color: #2e7d32; margin-top: 15px; font-size: 0.9rem;">
                            â€» åŠ©ã‘ã‚’æ±‚ã‚ã‚‹ã“ã¨ã¯ã€å¼±ã•ã§ã¯ãªãå¼·ã•ã§ã™
                        </p>
                    </div>

                    <div style="background: #f8f9ff; border-radius: 16px; padding: 20px; margin-top: 20px;">
                        <h4 style="color: #333; margin-bottom: 15px;">ğŸ’¡ æ—¥å¸¸ã§ã§ãã‚‹ã‚»ãƒ«ãƒ•ã‚±ã‚¢</h4>
                        <ul style="padding-left: 20px; color: #555; line-height: 2;">
                            <li>ğŸš¶ 1æ—¥15åˆ†ã®æ•£æ­©</li>
                            <li>ğŸ“ 3è¡Œæ—¥è¨˜ã§æ°—æŒã¡ã‚’æ›¸ãå‡ºã™</li>
                            <li>ğŸ§˜ æ·±å‘¼å¸ã‚’1æ—¥3å›æ„è­˜ã™ã‚‹</li>
                            <li>ğŸ‘¥ é€±1å›ã¯äººã¨è©±ã™æ™‚é–“ã‚’ä½œã‚‹</li>
                            <li>ğŸ“µ å¯ã‚‹å‰1æ™‚é–“ã¯ã‚¹ãƒãƒ›ã‚’è¦‹ãªã„</li>
                            <li>â˜€ï¸ æœæ—¥ã‚’æµ´ã³ã‚‹</li>
                        </ul>
                    </div>
                </div>

            </div><!-- /main-content -->
        </div>
    </div>

    <script>
        // ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
        (function() {
            const denied = document.getElementById('access-denied');
            const main = document.getElementById('main-content');
            const title = document.getElementById('denied-title');
            const message = document.getElementById('denied-message');

            if (!accessResult.valid) {
                denied.classList.add('show');
                main.classList.remove('show');
                if (accessResult.reason === 'expired') {
                    title.textContent = 'æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¦ã„ã¾ã™';
                    message.textContent = `ã“ã®ãƒšãƒ¼ã‚¸ã®æœ‰åŠ¹æœŸé™ã¯ ${accessResult.expireDate} ã§çµ‚äº†ã—ã¾ã—ãŸã€‚`;
                } else {
                    title.textContent = 'ã‚¢ã‚¯ã‚»ã‚¹ã‚­ãƒ¼ãŒç„¡åŠ¹ã§ã™';
                    message.textContent = 'æ­£ã—ã„URLã§å†åº¦ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚';
                }
            } else {
                denied.classList.remove('show');
                main.classList.add('show');
                loadHistory();
            }
        })();

        // æ°—åˆ†ã«å¿œã˜ãŸãƒ¬ã‚¹ãƒãƒ³ã‚¹
        const moodResponses = {
            great: {
                title: "ğŸ˜„ ç´ æ™´ã‚‰ã—ã„èª¿å­ã§ã™ã­ï¼",
                message: "ä»Šã®ãƒã‚¸ãƒ†ã‚£ãƒ–ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ´»ã‹ã—ã¦ã€ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°ãªä»•äº‹ã«å–ã‚Šçµ„ã‚€ã®ã«æœ€é©ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã™ã€‚",
                tips: [
                    "ã“ã®èª¿å­ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«ã€ä»Šæ—¥ã†ã¾ãã„ã£ãŸã“ã¨ã‚’3ã¤æ›¸ãç•™ã‚ã¦ãŠãã¾ã—ã‚‡ã†",
                    "ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒé«˜ã„æ™‚ã«ã“ãã€é›£ã—ã„æ±ºæ–­ã‚„å‰µé€ çš„ãªä½œæ¥­ã‚’",
                    "å‘¨ã‚Šã®äººã«ã‚‚ãƒã‚¸ãƒ†ã‚£ãƒ–ãªå½±éŸ¿ã‚’ä¸ãˆã‚‰ã‚Œã‚‹æ—¥ã§ã™"
                ]
            },
            good: {
                title: "ğŸ™‚ è‰¯ã„çŠ¶æ…‹ã§ã™ã­",
                message: "å®‰å®šã—ãŸæ°—æŒã¡ã§éã”ã›ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ã“ã®ãƒšãƒ¼ã‚¹ã‚’å¤§åˆ‡ã«ã—ã¾ã—ã‚‡ã†ã€‚",
                tips: [
                    "ä»Šæ—¥ã®å„ªå…ˆäº‹é …ã‚’3ã¤ã«çµã£ã¦ã€ç€å®Ÿã«é€²ã‚ã¾ã—ã‚‡ã†",
                    "é©åº¦ãªä¼‘æ†©ã‚’å–ã‚ŠãªãŒã‚‰ã€æŒç¶šå¯èƒ½ãªãƒšãƒ¼ã‚¹ã§",
                    "æ„Ÿè¬ã§ãã‚‹ã“ã¨ã‚’1ã¤è¦‹ã¤ã‘ã¦ã¿ã¦ãã ã•ã„"
                ]
            },
            normal: {
                title: "ğŸ˜ æ™®é€šã®çŠ¶æ…‹ã§ã™ã­",
                message: "ç‰¹åˆ¥è‰¯ãã‚‚æ‚ªãã‚‚ãªã„æ—¥ã€‚ãã‚Œã‚‚å¤§åˆ‡ãªæ—¥å¸¸ã®ä¸€éƒ¨ã§ã™ã€‚",
                tips: [
                    "å°ã•ãªé”æˆæ„Ÿã‚’ç©ã¿é‡ã­ã‚‹ã“ã¨ã§ã€æ°—åˆ†ãŒä¸Šå‘ãã“ã¨ã‚‚",
                    "ä½“ã‚’å‹•ã‹ã—ã¦ã¿ã‚‹ã¨ã€æ°—åˆ†è»¢æ›ã«ãªã‚Šã¾ã™",
                    "ç„¡ç†ã›ãšã€ä»Šã§ãã‚‹ã“ã¨ã«é›†ä¸­ã—ã¾ã—ã‚‡ã†"
                ]
            },
            anxious: {
                title: "ğŸ˜° ä¸å®‰ã‚’æ„Ÿã˜ã¦ã„ã‚‹ã‚“ã§ã™ã­",
                message: "èµ·æ¥­ã«ã¯ä¸å®‰ãŒã¤ãã‚‚ã®ã€‚ãã®ä¸å®‰ã¯ã€ŒçœŸå‰£ã«å–ã‚Šçµ„ã‚“ã§ã„ã‚‹è¨¼æ‹ ã€ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚",
                tips: [
                    "ä¸å®‰ã®æ­£ä½“ã‚’ç´™ã«æ›¸ãå‡ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚æ„å¤–ã¨å°ã•ãè¦‹ãˆã‚‹ã“ã¨ã‚‚",
                    "ã€Œæœ€æ‚ªã®å ´åˆã©ã†ãªã‚‹ï¼Ÿã€ã‚’å…·ä½“çš„ã«è€ƒãˆã‚‹ã¨ã€å¯¾ç­–ãŒè¦‹ãˆã¦ãã¾ã™",
                    "ä»Šã“ã®ç¬é–“ã€æ·±å‘¼å¸ã‚’3å›ã—ã¦ã¿ã¦ãã ã•ã„",
                    "ä¸€äººã§æŠ±ãˆè¾¼ã¾ãšã€èª°ã‹ã«è©±ã—ã¦ã¿ã‚‹ã“ã¨ã‚‚å¤§åˆ‡ã§ã™"
                ]
            },
            tired: {
                title: "ğŸ˜© ãŠç–²ã‚Œæ§˜ã§ã™",
                message: "é ‘å¼µã‚Šã™ãã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿä¼‘ã‚€ã“ã¨ã‚‚ã€èµ·æ¥­å®¶ã®å¤§åˆ‡ãªä»•äº‹ã§ã™ã€‚",
                tips: [
                    "ä»Šæ—¥ã¯æ—©ã‚ã«ä¼‘ã‚€è¨±å¯ã‚’è‡ªåˆ†ã«å‡ºã—ã¾ã—ã‚‡ã†",
                    "ã€Œä»Šæ—¥ã‚„ã‚‰ãªãã¦ã„ã„ã“ã¨ã€ã‚’3ã¤æ±ºã‚ã¦ã€æ‰‹æ”¾ã—ã¾ã—ã‚‡ã†",
                    "çŸ­ã„ä»®çœ ï¼ˆ15-20åˆ†ï¼‰ãŒåŠ¹æœçš„ãªã“ã¨ã‚‚ã‚ã‚Šã¾ã™",
                    "æ˜æ—¥ã®è‡ªåˆ†ã«ä»»ã›ã‚‰ã‚Œã‚‹ã“ã¨ã¯ã€æ˜æ—¥ã«å›ã—ã¦OK"
                ]
            },
            down: {
                title: "ğŸ˜¢ ã¤ã‚‰ã„æ™‚ã§ã™ã­",
                message: "ä»Šã¯è½ã¡è¾¼ã‚“ã§ã„ã¦ã‚‚ã€ãã‚Œã¯ä¸€æ™‚çš„ãªã‚‚ã®ã€‚ã‚ãªãŸã®ä¾¡å€¤ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚",
                tips: [
                    "ç„¡ç†ã«å‰å‘ãã«ãªã‚ã†ã¨ã—ãªãã¦å¤§ä¸ˆå¤«ã§ã™",
                    "ä»Šæ—¥ã¯è‡ªåˆ†ã«å„ªã—ãã™ã‚‹æ—¥ã«ã—ã¾ã—ã‚‡ã†",
                    "å¥½ããªéŸ³æ¥½ã‚’è´ãã€ãŠé¢¨å‘‚ã«å…¥ã‚‹ã€ãªã©å°ã•ãªå¿ƒåœ°ã‚ˆã•ã‚’",
                    "ã“ã®çŠ¶æ…‹ãŒ2é€±é–“ä»¥ä¸Šç¶šããªã‚‰ã€å°‚é–€å®¶ã¸ã®ç›¸è«‡ã‚‚æ¤œè¨ã—ã¦ãã ã•ã„",
                    "ã€Œã‚¬ã‚¤ãƒ‰ã€ã‚¿ãƒ–ã«ç›¸è«‡å…ˆãƒªã‚¹ãƒˆãŒã‚ã‚Šã¾ã™"
                ]
            }
        };

        // èªçŸ¥ã®æ­ªã¿ãƒ‘ã‚¿ãƒ¼ãƒ³
        const cognitiveDistortions = [
            {
                name: "å…¨ã‹ç„¡ã‹æ€è€ƒ",
                pattern: /å¤±æ•—|ã†ã¾ãã„ã‹ãªã„|ãƒ€ãƒ¡|ã§ããªã„|ç„¡ç†/,
                description: "ç‰©äº‹ã‚’ç™½ã‹é»’ã‹ã§åˆ¤æ–­ã—ã€ä¸­é–“ãŒãªã„è€ƒãˆæ–¹",
                reframe: "å®Œç’§ã§ãªãã¦ã‚‚ã€ã€Œ80ç‚¹ã€ã§ååˆ†ãªã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚å°ã•ãªæˆåŠŸã‚‚èªã‚ã¾ã—ã‚‡ã†ã€‚"
            },
            {
                name: "éåº¦ã®ä¸€èˆ¬åŒ–",
                pattern: /ã„ã¤ã‚‚|çµ¶å¯¾|ã¿ã‚“ãª|èª°ã‚‚|å…¨éƒ¨/,
                description: "ä¸€åº¦ã®å‡ºæ¥äº‹ã‹ã‚‰ã€Œã„ã¤ã‚‚ãã†ã ã€ã¨æ±ºã‚ã¤ã‘ã‚‹",
                reframe: "ã€Œä»Šå›ã¯ã€ã€Œã“ã®å ´é¢ã§ã¯ã€ã¨é™å®šã—ã¦è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¾‹å¤–ã¯ãªã„ã§ã™ã‹ï¼Ÿ"
            },
            {
                name: "å¿ƒã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼",
                pattern: /ã§ã‚‚|ã ã£ã¦|ã©ã†ã›|ã‘ã©/,
                description: "è‰¯ã„ã“ã¨ã‚’ç„¡è¦–ã—ã¦ã€æ‚ªã„ã“ã¨ã ã‘ã«æ³¨ç›®ã™ã‚‹",
                reframe: "ã†ã¾ãã„ã£ãŸã“ã¨ã€è‰¯ã‹ã£ãŸã“ã¨ã‚‚åŒæ™‚ã«æ€ã„å‡ºã—ã¦ã¿ã¦ãã ã•ã„ã€‚"
            },
            {
                name: "èª­å¿ƒè¡“",
                pattern: /æ€ã‚ã‚Œ|è¦‹ã‚‰ã‚Œ|ãã£ã¨.+ã ã‚ã†|ãŸã¶ã‚“.+ã¯ãš/,
                description: "ç›¸æ‰‹ã®è€ƒãˆã‚’å‹æ‰‹ã«æ¨æ¸¬ã—ã¦æ±ºã‚ã¤ã‘ã‚‹",
                reframe: "æœ¬å½“ã«ãã†æ€ã£ã¦ã„ã‚‹ã‹ã€ç¢ºèªã—ã¾ã—ãŸã‹ï¼Ÿæ¡ˆå¤–é•ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚"
            },
            {
                name: "ç ´å±€çš„æ€è€ƒ",
                pattern: /æœ€æ‚ª|çµ‚ã‚ã‚Š|å–ã‚Šè¿”ã—|ã‚‚ã†ãƒ€ãƒ¡/,
                description: "æœ€æ‚ªã®çµæœã°ã‹ã‚Šã‚’æƒ³åƒã—ã¦ã—ã¾ã†",
                reframe: "æœ€æ‚ªã®å ´åˆã§ã‚‚ã€æœ¬å½“ã«å–ã‚Šè¿”ã—ãŒã¤ã‹ãªã„ã§ã™ã‹ï¼Ÿå…·ä½“çš„ã«è€ƒãˆã‚‹ã¨ã€æ„å¤–ã¨å¯¾å‡¦æ³•ãŒã‚ã‚‹ã‚‚ã®ã§ã™ã€‚"
            },
            {
                name: "ã¹ãæ€è€ƒ",
                pattern: /ã¹ã|ã—ãªãã‚ƒ|ã—ãªã„ã¨|must|ã­ã°/,
                description: "ã€Œã€œã™ã¹ãã€ã¨è‡ªåˆ†ã‚’è¿½ã„è©°ã‚ã‚‹",
                reframe: "ã€Œã€œã—ãŸã„ã€ã€Œã€œã§ããŸã‚‰ã„ã„ãªã€ã«è¨€ã„æ›ãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ç¾©å‹™ã§ã¯ãªãé¸æŠã§ã™ã€‚"
            }
        ];

        let selectedMood = null;
        let history = [];

        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function showTab(tabId) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById('tab-' + tabId).classList.add('active');
        }

        // æ°—åˆ†é¸æŠ
        function selectMood(element, mood) {
            document.querySelectorAll('.mood-item').forEach(item => item.classList.remove('selected'));
            element.classList.add('selected');
            selectedMood = mood;

            const response = moodResponses[mood];
            const responseArea = document.getElementById('mood-response');

            responseArea.innerHTML = `
                <h3>${response.title}</h3>
                <p>${response.message}</p>
                <h4 style="color: #44A08D; margin: 15px 0 10px;">ğŸ’¡ ãŠã™ã™ã‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h4>
                <ul>
                    ${response.tips.map(tip => `<li>${tip}</li>`).join('')}
                </ul>
            `;
            responseArea.classList.add('show');
        }

        // ä¸å®‰åˆ†æ
        function analyzeWorry() {
            const worry = document.getElementById('worry-input').value.trim();
            if (!worry) {
                alert('ä¸å®‰ã‚„æ‚©ã¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            const foundDistortions = cognitiveDistortions.filter(d => d.pattern.test(worry));
            const responseArea = document.getElementById('worry-response');

            let html = `
                <h3>ğŸ” åˆ†æçµæœ</h3>
                <p>ã‚ãªãŸã®ä¸å®‰ã‚’åˆ†æã—ã¾ã—ãŸã€‚ã¾ãšã€æ›¸ãå‡ºã—ã¦ãã‚ŒãŸã“ã¨ãŒç´ æ™´ã‚‰ã—ã„ç¬¬ä¸€æ­©ã§ã™ã€‚</p>
            `;

            if (foundDistortions.length > 0) {
                html += `<h4 style="color: #FF6B6B; margin: 20px 0 15px;">âš ï¸ è¦‹ã¤ã‹ã£ãŸèªçŸ¥ã®æ­ªã¿</h4>`;
                foundDistortions.forEach(d => {
                    html += `
                        <div class="distortion-box">
                            <h4>ã€Œ${d.name}ã€ã®å‚¾å‘</h4>
                            <p>${d.description}</p>
                        </div>
                        <div class="reframe-box">
                            <h4>ğŸ’š åˆ¥ã®è¦–ç‚¹</h4>
                            <p>${d.reframe}</p>
                        </div>
                        <br>
                    `;
                });
            } else {
                html += `
                    <div class="reframe-box">
                        <h4>ğŸ’š æŒ¯ã‚Šè¿”ã‚Šã®ãƒã‚¤ãƒ³ãƒˆ</h4>
                        <p>å…·ä½“çš„ãªèªçŸ¥ã®æ­ªã¿ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãŸã ã€ä»¥ä¸‹ã®ç‚¹ã‚’è€ƒãˆã¦ã¿ã¦ãã ã•ã„ï¼š</p>
                        <ul style="margin-top: 10px;">
                            <li>ã“ã®ä¸å®‰ã¯ã€è‡ªåˆ†ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã“ã¨ã§ã™ã‹ï¼Ÿ</li>
                            <li>æœ€æ‚ªã®å ´åˆã€å®Ÿéš›ã«ã¯ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ</li>
                            <li>ã“ã®çŠ¶æ³ã‚’ä¹—ã‚Šè¶ŠãˆãŸäººã¯ã„ã¾ã›ã‚“ã‹ï¼Ÿ</li>
                            <li>1å¹´å¾Œã€ã“ã®ä¸å®‰ã‚’è¦šãˆã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ</li>
                        </ul>
                    </div>
                `;
            }

            html += `
                <div style="margin-top: 20px; padding: 15px; background: #f8f9ff; border-radius: 10px;">
                    <p style="font-size: 0.9rem; color: #666;">
                        ğŸ’¬ <strong>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:</strong>
                        ã“ã®åˆ†æã‚’è¸ã¾ãˆã¦ã€ä¸å®‰ã‚’åˆ¥ã®è¨€è‘‰ã§è¨€ã„æ›ãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚
                        ã¾ãŸã¯ã€ä¿¡é ¼ã§ãã‚‹äººã«è©±ã—ã¦ã¿ã‚‹ã“ã¨ã‚‚åŠ¹æœçš„ã§ã™ã€‚
                    </p>
                </div>
            `;

            responseArea.innerHTML = html;
            responseArea.classList.add('show');
        }

        // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼æ›´æ–°
        function updateSlider(type) {
            const value = document.getElementById(type + '-slider').value;
            document.getElementById(type + '-value').textContent = value;
        }

        // ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ä¿å­˜
        function saveCheckin() {
            const checkin = {
                date: new Date().toLocaleDateString('ja-JP'),
                time: new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' }),
                mood: document.getElementById('mood-slider').value,
                energy: document.getElementById('energy-slider').value,
                anxiety: document.getElementById('anxiety-slider').value,
                note: document.getElementById('checkin-note').value
            };

            history.unshift(checkin);
            if (history.length > 7) history.pop(); // ç›´è¿‘7æ—¥åˆ†ã®ã¿ä¿æŒ

            localStorage.setItem('mentalcare_history', JSON.stringify(history));

            document.getElementById('checkin-note').value = '';
            document.getElementById('mood-slider').value = 5;
            document.getElementById('energy-slider').value = 5;
            document.getElementById('anxiety-slider').value = 5;
            updateSlider('mood');
            updateSlider('energy');
            updateSlider('anxiety');

            displayHistory();
            alert('è¨˜éŒ²ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
        }

        // å±¥æ­´èª­ã¿è¾¼ã¿
        function loadHistory() {
            const saved = localStorage.getItem('mentalcare_history');
            if (saved) {
                history = JSON.parse(saved);
                displayHistory();
            }
        }

        // å±¥æ­´è¡¨ç¤º
        function displayHistory() {
            const container = document.getElementById('history-list');
            if (history.length === 0) {
                container.innerHTML = '<p style="color: #999; text-align: center;">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>';
                return;
            }

            const moodEmojis = ['ğŸ˜¢', 'ğŸ˜¢', 'ğŸ˜°', 'ğŸ˜°', 'ğŸ˜', 'ğŸ˜', 'ğŸ™‚', 'ğŸ™‚', 'ğŸ˜„', 'ğŸ˜„'];

            container.innerHTML = history.map(h => `
                <div class="history-item">
                    <div class="date">${h.date} ${h.time}</div>
                    <div style="display: flex; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <span class="mood">${moodEmojis[h.mood - 1]}</span>
                        <span style="font-size: 0.85rem; color: #666;">
                            æ°—åˆ†: ${h.mood} / ã‚¨ãƒãƒ«ã‚®ãƒ¼: ${h.energy} / ä¸å®‰: ${h.anxiety}
                        </span>
                    </div>
                    ${h.note ? `<div class="note" style="margin-top: 8px;">${h.note}</div>` : ''}
                </div>
            `).join('');
        }
    </script>
</body>
</html>
